<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {%- seo -%}
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/main.css">
    {%- feed_meta -%}
    {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
    {%- endif -%}

    <!-- 主题切换按钮 -->
    <button id="theme-toggle" style="position: fixed; top: 20px; right: 20px; padding: 10px; background-color: #333; color: #fff; border: none; border-radius: 5px; cursor: pointer;">
        🌙/☀️
    </button>

    <!-- 主题切换脚本 -->
    <script>
        // 获取当前主题，默认浅色
        function getPreferredTheme() {
            const savedTheme = localStorage.getItem('theme');
            return savedTheme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        }

        // 设置主题
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        }

        // 初始化主题
        function initTheme() {
            const currentTheme = getPreferredTheme();
            setTheme(currentTheme);
        }

        // 切换主题
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        }

        // 监听按钮点击事件
        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

        // 初始化页面时加载当前主题
        initTheme();
    </script>
</head>
