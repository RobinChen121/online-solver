<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {%- seo -%}
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/main.css">
    {%- feed_meta -%}
    {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
    {%- endif -%}

    <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
    <button id="theme-toggle" style="position: fixed; top: 20px; right: 20px; padding: 10px; background-color: #333; color: #fff; border: none; border-radius: 5px; cursor: pointer;">
        ğŸŒ™/â˜€ï¸
    </button>

    <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ -->
    <script>
        // è·å–å½“å‰ä¸»é¢˜ï¼Œé»˜è®¤æµ…è‰²
        function getPreferredTheme() {
            const savedTheme = localStorage.getItem('theme');
            return savedTheme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        }

        // è®¾ç½®ä¸»é¢˜
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        }

        // åˆå§‹åŒ–ä¸»é¢˜
        function initTheme() {
            const currentTheme = getPreferredTheme();
            setTheme(currentTheme);
        }

        // åˆ‡æ¢ä¸»é¢˜
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        }

        // ç›‘å¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

        // åˆå§‹åŒ–é¡µé¢æ—¶åŠ è½½å½“å‰ä¸»é¢˜
        initTheme();
    </script>
</head>
